generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id           Int     @id @default(autoincrement())
  email        String  @unique
  password     String
  refreshToken String?
}

model Employee {
  id               Int            @id @default(autoincrement())
  firstName        String
  lastName         String
  email            String         @unique
  department       Department     @relation(fields: [departmentId], references: [id])
  specialization   Specialization @relation(fields: [specializationId], references: [id])
  departmentId     Int
  specializationId Int
  cvs              CV[]
}

model CV {
  id       Int            @id @default(autoincrement())
  cvName   String
  // createdAt DateTime   @default(now())
  // updatedAt DateTime   @updatedAt
  language LanguageInfo[]
  skills   Skill[]

  firstName        String
  lastName         String
  email            String
  department       Department     @relation(fields: [departmentId], references: [id])
  specialization   Specialization @relation(fields: [specializationId], references: [id])
  departmentId     Int
  specializationId Int

  employeeInfo Employee     @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  employeeId   Int
  cvsProjects  CvsProject[]
}

model Project {
  id               Int              @id @default(autoincrement())
  projectName      String
  startDate        DateTime?
  endDate          DateTime?
  teamSize         Int              @default(1)
  techStack        Skill[]
  description      String?
  responsibilities Responsibility[]
  teamRoles        TeamRole[]
}

model CvsProject {
  id               Int              @id @default(autoincrement())
  projectName      String
  startDate        DateTime?
  endDate          DateTime?
  teamSize         Int              @default(1)
  techStack        Skill[]
  description      String?
  responsibilities Responsibility[]
  teamRoles        TeamRole[]
  cvs              CV[]
}

model Skill {
  id         Int          @id @default(autoincrement())
  name       String       @unique
  cvs        CV[]
  projects   Project[]
  cvsProject CvsProject[]
}

model TeamRole {
  id         Int          @id @default(autoincrement())
  name       String       @unique
  projects   Project[]
  cvsProject CvsProject[]
}

model Responsibility {
  id         Int          @id @default(autoincrement())
  name       String       @unique
  projects   Project[]
  cvsProject CvsProject[]
}

model Language {
  id           Int            @id @default(autoincrement())
  name         String         @unique
  LanguageInfo LanguageInfo[]
}

model Level {
  id           Int            @id @default(autoincrement())
  name         String         @unique
  LanguageInfo LanguageInfo[]
}

model LanguageInfo {
  id      Int      @id @default(autoincrement())
  name    Language @relation(fields: [nameId], references: [id])
  nameId  Int
  level   Level    @relation(fields: [levelId], references: [id])
  levelId Int
  cvs     CV[]
}

model Department {
  id        Int        @id @default(autoincrement())
  name      String     @unique
  employees Employee[]
  cvs       CV[]
}

model Specialization {
  id        Int        @id @default(autoincrement())
  name      String     @unique
  employees Employee[]
  cvs       CV[]
}
